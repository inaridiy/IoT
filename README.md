# プロトタイプ
Connecterはメッシュネットワークを作成しプラグインで管理,運用できるwebアプリを作成できるソフトウェアです。プラグインという形でアイデアを共有することで、新しいものの開発や大規模な制作の際の行き詰まりなどの打開策となります。個人の開発の時に起こりうる、情報の活用法が見つからないがための制作物のマンネリ化を解消します。  　　
そのConnecterのプロトタイプ?というか実験用に作られたコードたちです  
※初めてのgithubなのでいろいろと間違いがあるかもしれません　  　

## 動作環境
### ハードウェア
　Arduino core for the ESP32　　  
### サーバー
OS         ubuntu18.04　　  
nodejsバージョン　13.90　　  

## 基本的な使い方
まず実行したいプロトタイプのフォルダーをダウンロードします　　  
次にダウンロードしたプロトタイプの中から同じ名前のフォルダーを取り出します。　　  
取り出したフォルダーの中のinoファイルをarduino ideで読み込んでESP32にかきこんでください　　  
次にvpsなどのlinuxに残りのフォルダーをアップロードしてください　　  
そしてアップロードしたフォルダに行き以下のコマンドを実行してください　
  
$ npm install && node index.js
   
そうするとサーバーが起動します　　  
プロトタイプによって他のもいろいろと違うところがあるのでそこは下のうろとタイプごとの　　  
詳細を見てください　　  

## 各プロトタイプの機能と詳細
### プロトタイプA
このプロトタイプはESP32からnode jsサーバーにmqttプロトコルを送信することと　　  
ESP32を電池で長時間動かすための仕組みに関する技術を習得するために作られたプロトタイプです　  

#### 機能
一時間に一回ESP32がsleepから復帰してnodejs serverに温度湿度気圧を送信する　　  
送信されたデータをスマホから見れる　　  
node jsはmqttブローカーを兼ねる　　  
実際に動作している様子　　
![IMG_1557](https://user-images.githubusercontent.com/54490378/78382531-fc70e480-7611-11ea-93e9-fac3304ba7b9.png)　　
このようにスマホなどのブラウザから温度湿度気圧の情報を見ることが出来る

#### 使い方
##### 必要なもの
ESP32devkit  BME280 単三電池二本
##### 必要なライブラリ
PubSubClient  
https://github.com/knolleary/pubsubclient  
ESP32_BME280_I2C.h  
https://www.mgo-tec.com/blog-entry-esp32-bme280-sensor-library.html  
それぞれのリンクから必要なライブラリをダウンロードしてライブラリを入れてください
##### サーバー側の設定
ポート3000とポート1883を開ける  

##### 実際に使う
ESP32の21番ポートにBME280のsdaを、22番ポートにsclを繋ぐ  
ESP32の3V3にBME280の3.3vと単三電池二本を直列につないでその＋側を繋ぐ  
ESP32のGNDにBME280のGNDと電池の－を繋ぐ  
出来たモジュールを温度等を測定したい場所に置く(常識的な場所に)
上でかいた基本的な使い方を行う  
ブラウザからhttp://サーバーのipアドレス:3000 にアクセスする
グラフが表示される  

実際に測定しているときの様子  
![IMG_1550](https://user-images.githubusercontent.com/54490378/78384815-d4838000-7615-11ea-93d1-98fe6a625516.jpg)

### プロトタイプB
このプロトタイプはサーバーとESP32をリアルタイム通信をすることとESP32で  
PWM制御を学習する目的で作りました  
#### 機能
起動するとスマホやPC等のブラウザからESP32についているLEDをリアルタイムで制御できる  
　
#### 使い方
##### 必要なもの
ESP32devkit  フルカラーLED
##### 必要なライブラリ
PubSubClient  
https://github.com/knolleary/pubsubclient  
それぞれのリンクから必要なライブラリをダウンロードしてライブラリを入れてください
##### サーバー側の設定
ポート3000とポート1883を開ける  

##### 実際に使う
フルカラーLEDをESP32の25,32,33にさす  
上でかいた基本的な使い方を行う  
ブラウザからhttp://サーバーのipアドレス:3000 にアクセスする
スライダーが表示されるのでいじって遊ぶ
qiita
https://qiita.com/inainainariinainari/items/799444a120521e6ea583


